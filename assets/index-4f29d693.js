var Ue=Object.defineProperty;var Ve=(t,e,s)=>e in t?Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var f=(t,e,s)=>(Ve(t,typeof e!="symbol"?e+"":e,s),s),Te=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var c=(t,e,s)=>(Te(t,e,"read from private field"),s?s.call(t):e.get(t)),a=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)};var r=(t,e,s)=>(Te(t,e,"access private method"),s);import{$ as We}from"./index-02e6f764.js";import{d as Oe,W as je,f as Je,Q as Xe,I as Ge,R as Ke,O as Ye,J as Ze,L as et}from"./vue-01374ff5.js";import{R as tt}from"./naive-6d3413c4.js";import"./ua-e4904872.js";import"./crypto-288cdcb1.js";import"./colord-654bd828.js";import"./qs-d610bdbc.js";import"./lodash-000674ce.js";import"./echarts-34e81954.js";import"./axios-82afda87.js";import"./formData-cdafa8d7.js";const xe=t=>Array.isArray(t),ke=t=>xe(t)?t:[t];let st=function(t){let e=function(d){return ke(d).forEach(m=>{var K;return p.set(Symbol((K=m.char)==null?void 0:K.innerText),n({...m}))}),this},s=()=>l().filter(d=>d.typeable),i=function(d,m){let K=[...p.keys()];p.set(K[d],n(m))},n=d=>(d.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},d),o=function(){p.forEach(d=>delete d.done)},h=function(){p=new Map,e(t)},u=()=>p,l=()=>Array.from(p.values()),g=d=>p.delete(d),X=()=>{const d=[];for(let[,m]of u())m.done||d.push(m);return d},v=(d=!1)=>d?l():l().filter(m=>!m.done),G=(d,m=!1)=>m?p.delete(d):p.get(d).done=!0,p=new Map;return e(t),{add:e,set:i,wipe:h,done:G,reset:o,destroy:g,getItems:v,getQueue:u,getTypeable:s,getPendingQueueItems:X}};const _e="data-typeit-id",_="ti-cursor",it="END",rt={started:!1,completed:!1,frozen:!1,destroyed:!1},A={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(t=>({opacity:t})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},nt=`[${_e}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,Z=t=>document.createElement(t),ge=t=>document.createTextNode(t),ve=(t,e="")=>{let s=Z("style");s.id=e,s.appendChild(ge(t)),document.head.appendChild(s)},Ce=t=>(xe(t)||(t=[t/2,t/2]),t),Se=(t,e)=>Math.abs(Math.random()*(t+e-(t-e))+(t-e));let Ee=t=>t/2;function ot(t){let{speed:e,deleteSpeed:s,lifeLike:i}=t;return s=s!==null?s:e/3,i?[Se(e,Ee(e)),Se(s,Ee(s))]:[e,s]}const Le=t=>Array.from(t);let we=t=>([...t.childNodes].forEach(e=>{if(e.nodeValue){[...e.nodeValue].forEach(s=>{e.parentNode.insertBefore(ge(s),e)}),e.remove();return}we(e)}),t);const Ae=t=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,we(e.body)};function De(t,e=!1,s=!1){let i=t.querySelector(`.${_}`),n=document.createTreeWalker(t,NodeFilter.SHOW_ALL,{acceptNode:u=>{var l,g;if(i&&s){if((l=u.classList)!=null&&l.contains(_))return NodeFilter.FILTER_ACCEPT;if(i.contains(u))return NodeFilter.FILTER_REJECT}return(g=u.classList)!=null&&g.contains(_)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),o,h=[];for(;o=n.nextNode();)o.originalParent||(o.originalParent=o.parentNode),h.push(o);return e?h.reverse():h}function ut(t){return De(Ae(t))}function lt(t,e=!0){return e?ut(t):Le(t).map(ge)}const at=({index:t,newIndex:e,queueItems:s,cleanUp:i})=>{for(let n=t+1;n<e+1;n++)i(s[n][0])},qe=t=>Number.isInteger(t),Ie=({queueItems:t,selector:e,cursorPosition:s,to:i})=>{if(qe(e))return e*-1;let n=new RegExp(it,"i").test(i),o=e?[...t].reverse().findIndex(({char:u})=>{let l=u.parentElement,g=l.matches(e);return n&&g?!0:g&&l.firstChild.isSameNode(u)}):-1;o<0&&(o=n?0:t.length-1);let h=n?0:1;return o-s+h},ht=t=>(t.forEach(clearTimeout),[]),Y=(t,e)=>new Array(e).fill(t);let ie=t=>new Promise(e=>{requestAnimationFrame(async()=>{e(await t())})}),Re=t=>t==null?void 0:t.getAnimations().find(e=>e.id===t.dataset.tiAnimationId),Me=({cursor:t,frames:e,options:s})=>{let i=t.animate(e,s);return i.pause(),i.id=t.dataset.tiAnimationId,ie(()=>{ie(()=>{i.play()})}),i},dt=({cursor:t,options:e,cursorOptions:s})=>{if(!t||!s)return;let i=Re(t),n;i&&(e.delay=i.effect.getComputedTiming().delay,n=i.currentTime,i.cancel());let o=Me({cursor:t,frames:s.animation.frames,options:e});return n&&(o.currentTime=n),o},Ne=t=>{var e;return(e=t.func)==null?void 0:e.call(null)},ct=async({index:t,queueItems:e,wait:s,cursor:i,cursorOptions:n})=>{let o=e[t][1],h=[],u=t,l=o,g=()=>l&&!l.delay,X=o.shouldPauseCursor()&&n.autoPause;for(;g();)h.push(l),g()&&u++,l=e[u]?e[u][1]:null;if(h.length)return await ie(async()=>{for(let p of h)await Ne(p)}),u-1;let v=Re(i),G;return v&&(G={...v.effect.getComputedTiming(),delay:X?n.autoPauseDelay:0}),await s(async()=>{v&&X&&v.cancel(),await ie(()=>{Ne(o)})},o.delay),await dt({cursor:i,options:G,cursorOptions:n}),t};const ft=(t,e)=>{new IntersectionObserver((i,n)=>{i.forEach(o=>{o.isIntersecting&&(e(),n.unobserve(t))})},{threshold:1}).observe(t)},pt=()=>Math.random().toString().substring(2,9),re=t=>"value"in t;let mt=t=>re(t)?Le(t.value):De(t,!0).filter(e=>!(e.childNodes.length>0)),L=t=>typeof t=="function"?t():t,Pe=(t,e=document,s=!1)=>e[`querySelector${s?"All":""}`](t),yt=t=>/body/i.test(t==null?void 0:t.tagName),bt=(t,e)=>{if(re(t)){t.value=`${t.value}${e.textContent}`;return}e.innerHTML="";let s=yt(e.originalParent)?t:e.originalParent||t,i=Pe("."+_,s)||null;i&&i.parentElement!==s&&(s=i.parentElement),s.insertBefore(e,i)};const gt=t=>/<(.+)>(.*?)<\/(.+)>/.test(t.outerHTML),M=(t,e)=>Object.assign({},t,e);let wt=t=>{var e,s;if(typeof t=="object"){let i={},{frames:n,options:o}=A.cursor.animation;return i.animation=t.animation||{},i.animation.frames=((e=t.animation)==null?void 0:e.frames)||n,i.animation.options=M(o,((s=t.animation)==null?void 0:s.options)||{}),i.autoPause=t.autoPause??A.cursor.autoPause,i.autoPauseDelay=t.autoPauseDelay||A.cursor.autoPauseDelay,i}return t===!0?A.cursor:t};const Pt=(t,e)=>{if(!t)return;let s=t.parentNode;(s.childNodes.length>1||s.isSameNode(e)?t:s).remove()},Tt=(t,e,s)=>{let i=e[s-1],n=Pe(`.${_}`,t);t=(i==null?void 0:i.parentNode)||t,t.insertBefore(n,i||null)};function Ct(t){return typeof t=="string"?Pe(t):t}let St={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},Et=(t,e)=>{let i=`${`[${_e}='${t}']`} .${_}`,n=getComputedStyle(e),o=Object.entries(St).reduce((h,[u,l])=>`${h} ${u}: var(--ti-cursor-${u}, ${l||n[u]});`,"");ve(`${i} { display: inline-block; width: 0; ${o} }`,t)};function It(t){return t.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let Nt=(t,e,s)=>Math.min(Math.max(e+t,0),s.length),xt=(t,e,s)=>new Promise(i=>{let n=async()=>{await t(),i()};s.push(setTimeout(n,e||0))});var ne,Qe,S,Q,U,ce,oe,$e,V,fe,W,pe,O,me,D,ee,y,w,ue,Fe,E,$,I,F,le,He,ae,he,Be,de,ze,j,ye,q,te,N,H,R,se,T,C,x,B,k,z,J,be,b,P;class kt{constructor(e,s={}){a(this,ne);a(this,S);a(this,U);a(this,oe);a(this,V);a(this,W);a(this,O);a(this,D);a(this,y);a(this,ue);a(this,E);a(this,I);a(this,le);a(this,he);a(this,de);a(this,j);a(this,q);a(this,N);a(this,R);a(this,T);a(this,x);a(this,k);a(this,J);a(this,b);f(this,"element");f(this,"timeouts");f(this,"cursorPosition");f(this,"predictedCursorPosition");f(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1});f(this,"opts");f(this,"id");f(this,"queue");f(this,"cursor");f(this,"flushCallback",null);f(this,"unfreeze",()=>{});f(this,"is",function(e){return this.statuses[e]});a(this,ae,e=>{this.opts.cursor=wt(e.cursor??A.cursor),this.opts.strings=r(this,he,Be).call(this,ke(this.opts.strings)),this.opts=M(this.opts,{html:!c(this,k,z)&&this.opts.html,nextStringDelay:Ce(this.opts.nextStringDelay),loopDelay:Ce(this.opts.loopDelay)})});this.opts=M(A,s),this.element=Ct(e),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=M({},rt),this.id=pt(),this.queue=st([{delay:this.opts.startDelay}]),c(this,ae).call(this,s),this.cursor=r(this,de,ze).call(this),this.element.dataset.typeitId=this.id,ve(nt),this.opts.strings.length&&r(this,le,He).call(this)}go(){return this.statuses.started?this:(r(this,O,me).call(this),this.opts.waitUntilVisible?(ft(this.element,r(this,S,Q).bind(this)),this):(r(this,S,Q).call(this),this))}destroy(e=!0){this.timeouts=ht(this.timeouts),L(e)&&this.cursor&&r(this,R,se).call(this,this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let s in this.statuses)this.statuses[s]=!1;return this.element[r(this,D,ee).call(this)?"value":"innerHTML"]="",this}type(e,s={}){e=L(e);let{instant:i}=s,n=r(this,E,$).call(this,s),h=lt(e,this.opts.html).map(l=>({func:()=>r(this,q,te).call(this,l),char:l,delay:i||gt(l)?0:r(this,T,C).call(this),typeable:l.nodeType===Node.TEXT_NODE})),u=[n[0],{func:async()=>await this.opts.beforeString(e,this)},...h,{func:async()=>await this.opts.afterString(e,this)},n[1]];return r(this,y,w).call(this,u,s)}break(e={}){return r(this,y,w).call(this,{func:()=>r(this,q,te).call(this,Z("BR")),typeable:!0},e)}move(e,s={}){e=L(e);let i=r(this,E,$).call(this,s),{instant:n,to:o}=s,h=Ie({queueItems:this.queue.getTypeable(),selector:e===null?"":e,to:o,cursorPosition:c(this,x,B)}),u=h<0?-1:1;return this.predictedCursorPosition=c(this,x,B)+h,r(this,y,w).call(this,[i[0],...Y({func:()=>r(this,U,ce).call(this,u),delay:n?0:r(this,T,C).call(this),cursorable:!0},Math.abs(h)),i[1]],s)}exec(e,s={}){let i=r(this,E,$).call(this,s);return r(this,y,w).call(this,[i[0],{func:()=>e(this)},i[1]],s)}options(e,s={}){return e=L(e),r(this,I,F).call(this,e),r(this,y,w).call(this,{},s)}pause(e,s={}){return r(this,y,w).call(this,{delay:L(e)},s)}delete(e=null,s={}){e=L(e);let i=r(this,E,$).call(this,s),n=e,{instant:o,to:h}=s,u=this.queue.getTypeable(),l=(()=>n===null?u.length:qe(n)?n:Ie({queueItems:u,selector:n,cursorPosition:c(this,x,B),to:h}))();return r(this,y,w).call(this,[i[0],...Y({func:r(this,N,H).bind(this),delay:o?0:r(this,T,C).call(this,1),deletable:!0},l),i[1]],s)}freeze(){this.statuses.frozen=!0}flush(e=null){return this.flushCallback=e||this.flushCallback,this.statuses.firing?this:(r(this,O,me).call(this),r(this,S,Q).call(this,!1).then(()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}),this)}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return r(this,I,F).call(this,e)}getElement(){return this.element}empty(e={}){return r(this,y,w).call(this,{func:r(this,ne,Qe).bind(this)},e)}}ne=new WeakSet,Qe=async function(){if(r(this,D,ee).call(this)){this.element.value="";return}c(this,b,P).forEach(r(this,R,se).bind(this))},S=new WeakSet,Q=async function(e=!0){this.statuses.started=!0,this.statuses.firing=!0;let s=i=>{this.queue.done(i,!e)};try{let i=[...this.queue.getQueue()];for(let o=0;o<i.length;o++){let[h,u]=i[o];if(!u.done){if(!u.deletable||u.deletable&&c(this,b,P).length){let l=await r(this,V,fe).call(this,o,i);at({index:o,newIndex:l,queueItems:i,cleanUp:s}),o=l}s(h)}}if(!e)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let n=this.opts.loopDelay;r(this,W,pe).call(this,async()=>{await r(this,oe,$e).call(this,n[0]),r(this,S,Q).call(this)},n[1])}catch{}return this.statuses.firing=!1,this},U=new WeakSet,ce=async function(e){this.cursorPosition=Nt(e,this.cursorPosition,c(this,b,P)),Tt(this.element,c(this,b,P),this.cursorPosition)},oe=new WeakSet,$e=async function(e){let s=c(this,x,B);s&&await r(this,U,ce).call(this,{value:s});let i=c(this,b,P).map(n=>[Symbol(),{func:r(this,N,H).bind(this),delay:r(this,T,C).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let n=0;n<i.length;n++)await r(this,V,fe).call(this,n,i);this.queue.reset(),this.queue.set(0,{delay:e})},V=new WeakSet,fe=function(e,s){return ct({index:e,queueItems:s,wait:r(this,W,pe).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},W=new WeakSet,pe=async function(e,s,i=!1){this.statuses.frozen&&await new Promise(n=>{this.unfreeze=()=>{this.statuses.frozen=!1,n()}}),i||await this.opts.beforeStep(this),await xt(e,s,this.timeouts),i||await this.opts.afterStep(this)},O=new WeakSet,me=async function(){if(!r(this,D,ee).call(this)&&this.cursor&&this.element.appendChild(this.cursor),c(this,J,be)){Et(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:s,options:i}=e;Me({frames:s,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...i}})}},D=new WeakSet,ee=function(){return re(this.element)},y=new WeakSet,w=function(e,s){return this.queue.add(e),r(this,ue,Fe).call(this,s),this},ue=new WeakSet,Fe=function(e={}){let s=e.delay;s&&this.queue.add({delay:s})},E=new WeakSet,$=function(e={}){return[{func:()=>r(this,I,F).call(this,e)},{func:()=>r(this,I,F).call(this,this.opts)}]},I=new WeakSet,F=async function(e){this.opts=M(this.opts,e)},le=new WeakSet,He=function(){let e=this.opts.strings.filter(s=>!!s);e.forEach((s,i)=>{if(this.type(s),i+1===e.length)return;let n=this.opts.breakLines?[{func:()=>r(this,q,te).call(this,Z("BR")),typeable:!0}]:Y({func:r(this,N,H).bind(this),delay:r(this,T,C).call(this,1)},this.queue.getTypeable().length);r(this,j,ye).call(this,n)})},ae=new WeakMap,he=new WeakSet,Be=function(e){let s=this.element.innerHTML;return s?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=s,we(this.element),r(this,j,ye).call(this,Y({func:r(this,N,H).bind(this),delay:r(this,T,C).call(this,1),deletable:!0},c(this,b,P).length)),e):It(s).concat(e)):e},de=new WeakSet,ze=function(){if(c(this,k,z))return null;let e=Z("span");return e.className=_,c(this,J,be)?(e.innerHTML=Ae(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)},j=new WeakSet,ye=function(e){let s=this.opts.nextStringDelay;this.queue.add([{delay:s[0]},...e,{delay:s[1]}])},q=new WeakSet,te=function(e){bt(this.element,e)},N=new WeakSet,H=function(){c(this,b,P).length&&(c(this,k,z)?this.element.value=this.element.value.slice(0,-1):r(this,R,se).call(this,c(this,b,P)[this.cursorPosition]))},R=new WeakSet,se=function(e){Pt(e,this.element)},T=new WeakSet,C=function(e=0){return ot(this.opts)[e]},x=new WeakSet,B=function(){return this.predictedCursorPosition??this.cursorPosition},k=new WeakSet,z=function(){return re(this.element)},J=new WeakSet,be=function(){return!!this.opts.cursor&&!c(this,k,z)},b=new WeakSet,P=function(){return mt(this.element)};const _t={class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},zt=Oe({__name:"index",setup(t){const e=je();function s(){if(!e.value)return;const i={strings:"落霞与孤鹜齐飞，秋水共长天一色。",lifeLike:!0,speed:120,loop:!0};new kt(e.value,i).go()}return Je(()=>{s()}),(i,n)=>{const o=tt;return Xe(),Ge("div",_t,[Ke(o,{title:et(We)("routes.plugin.typewriter"),bordered:!1,class:"h-full"},{default:Ye(()=>[Ze("span",{ref_key:"textRef",ref:e,class:"text-18px"},null,512)]),_:1},8,["title"])])}}});export{zt as default};
