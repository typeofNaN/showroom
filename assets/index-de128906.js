import{$ as o,_ as C}from"./index-a40647a9.js";import{x as B,S as L,_ as q,V as U,T as W,W as D,X as E,R as H}from"./naive-6d3413c4.js";import{d as X,r as v,f as A,Q as J,I as Q,R as n,O as l,J as y,L as m,c as P,a9 as O}from"./vue-01374ff5.js";import"./ua-e4904872.js";import"./crypto-288cdcb1.js";import"./colord-654bd828.js";import"./qs-d610bdbc.js";import"./lodash-000674ce.js";import"./echarts-34e81954.js";import"./axios-82afda87.js";import"./formData-cdafa8d7.js";const Y={class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},j={class:"h-full flex-center"},z={class:"h-full flex-center"},ie=X({__name:"index",setup(F){const N=v(),g=v(),i=v({companyName:"某某测试有限公司",sealName:"测试专用章"}),I=v({companyName:{required:!0,message:o("page.canvas.drawOfficialSeal.companyNameValidTip"),trigger:["input","blur"]},sealName:{required:!0,message:o("page.canvas.drawOfficialSeal.sealNameValidTip"),trigger:["input","blur"]}});A(()=>{S()});function S(){const t=g.value,e=t.getContext("2d");t.width=250,t.height=250;const r=t.width/2,s=t.height/2;e.lineWidth=5,e.strokeStyle="#f00",e.beginPath(),e.arc(r,s,110,0,Math.PI*2),e.stroke(),f(e,r,s,30,"#f00",0),e.font="20px Helvetica",e.textBaseline="middle",e.textAlign="center",e.lineWidth=1,e.fillStyle="#f00",e.fillText(i.value.sealName,r,s+65),e.translate(r,s),e.font="24px Helvetica";const c=i.value.companyName.length,_=4*Math.PI/(3*(c-1)),h=i.value.companyName.split("");let u="";for(let a=0;a<c;a++)u=h[a],a==0?e.rotate(5*Math.PI/6):e.rotate(_),e.save(),e.translate(90,0),e.rotate(Math.PI/2),e.fillText(u,0,5),e.restore();function f(a,w,p,b,T,V){a.save(),a.fillStyle=T,a.translate(w,p),a.rotate(Math.PI+V),a.beginPath();let M=Math.sin(0),k=Math.cos(0);const x=Math.PI/5*4;for(let d=0;d<5;d++)M=Math.sin(d*x),k=Math.cos(d*x),a.lineTo(M*b,k*b);a.closePath(),a.stroke(),a.fill(),a.restore()}}async function R(){var t;await((t=N.value)==null?void 0:t.validate()),S()}function $(){var t,e;try{const s=g.value.toDataURL("image/png"),c=document.createElement("a");c.download="seal.png",c.href=s,c.click(),(t=window.$message)==null||t.success(o("common.download.success"))}catch{(e=window.$message)==null||e.error(o("common.download.fail"))}}return(t,e)=>{const r=B,s=L,c=C,_=q,h=U,u=W,f=D,a=E,w=H;return J(),Q("div",Y,[n(w,{title:m(o)("routes.canvas.drawOfficialSeal"),bordered:!1,class:"h-full"},{default:l(()=>[n(a,{class:"h-full"},{default:l(()=>[n(f,{span:12},{default:l(()=>[y("div",j,[n(u,{ref_key:"formRef",ref:N,model:i.value,rules:I.value,"label-placement":"left","label-width":"140px","require-mark-placement":"left"},{default:l(()=>[n(s,{label:m(o)("page.canvas.drawOfficialSeal.companyNameLabel"),path:"companyName"},{default:l(()=>[n(r,{value:i.value.companyName,"onUpdate:value":e[0]||(e[0]=p=>i.value.companyName=p),placeholder:m(o)("page.canvas.drawOfficialSeal.companyNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{label:m(o)("page.canvas.drawOfficialSeal.sealNameLabel"),path:"sealName"},{default:l(()=>[n(r,{value:i.value.sealName,"onUpdate:value":e[1]||(e[1]=p=>i.value.sealName=p),placeholder:m(o)("page.canvas.drawOfficialSeal.sealNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(s,{label:" "},{default:l(()=>[n(h,null,{default:l(()=>[n(_,{type:"primary",onClick:R},{icon:l(()=>[n(c,{icon:"mingcute:seal-line"})]),default:l(()=>[P(" "+O(m(o)("page.canvas.drawOfficialSeal.createSeal")),1)]),_:1}),n(_,{type:"warning",onClick:$},{icon:l(()=>[n(c,{icon:"material-symbols:download"})]),default:l(()=>[P(" "+O(m(o)("page.canvas.drawOfficialSeal.downloadSeal")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1}),n(f,{span:12},{default:l(()=>[y("div",z,[y("canvas",{ref_key:"canvasRef",ref:g},null,512)])]),_:1})]),_:1})]),_:1},8,["title"])])}}});export{ie as default};
