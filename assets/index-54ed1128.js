import{E as x}from"./index-683b81ac.js";import{G as m}from"./github-59e63060.js";import{d as b,r as g,Q as w,I as v,R as o,O as s,J as u,c as y}from"./vue-01374ff5.js";import{x as R,_ as k,W as G,X as E,R as N}from"./naive-6d3413c4.js";import"./ua-e4904872.js";import"./crypto-288cdcb1.js";import"./colord-654bd828.js";import"./qs-d610bdbc.js";import"./lodash-000674ce.js";import"./echarts-34e81954.js";import"./axios-82afda87.js";import"./formData-cdafa8d7.js";const O={class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},$={class:"flex-center h-full gap-20px"},B={class:"flex-center h-full"},W=b({__name:"index",setup(C){const i=g(""),{domRef:d,updateOptions:f}=x(()=>({}),{onRender(){}});async function h(){var c,l;const r=i.value.trim();if(!r)return;(c=window.$message)==null||c.info("查询中...");const{data:n}=await m.getPublicRepo(r);if(n){const p=(await Promise.all(n.map(async e=>{const{data:t}=await m.getRepoLanguage(r,e);return t}))).reduce((e,t)=>(Object.keys(t).forEach(a=>{e[a]=e[a]?e[a]+t[a]:t[a]}),e),{});(l=window.$message)==null||l.success("查询成功！"),f(()=>({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"GitHub",type:"pie",radius:"60%",center:["50%","50%"],data:Object.keys(p).map(e=>({name:e,value:p[e]}))}]}))}}return(r,n)=>{const c=R,l=k,_=G,p=E,e=N;return w(),v("div",O,[o(e,{title:"Github代码数统计分析",bordered:!1,class:"h-full"},{default:s(()=>[o(p,{class:"h-full"},{default:s(()=>[o(_,{span:8},{default:s(()=>[u("div",$,[o(c,{value:i.value,"onUpdate:value":n[0]||(n[0]=t=>i.value=t),placeholder:"输入Github用户名",clearable:""},null,8,["value"]),o(l,{type:"primary",onClick:h},{default:s(()=>[y("查询")]),_:1})])]),_:1}),o(_,{span:16},{default:s(()=>[u("div",B,[u("div",{ref_key:"chartRef",ref:d,class:"w-500px h-500px"},null,512)])]),_:1})]),_:1})]),_:1})])}}});export{W as default};
