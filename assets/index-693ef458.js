import{$ as s,_ as C}from"./index-2bf3a3bb.js";import{x as B,S as L,_ as q,V as U,T as W,W as D,X as E}from"./naive-c480ebd7.js";import{d as H,r as g,f as X,Q as A,I as J,J as v,R as n,O as t,L as m,c as P,a9 as x}from"./vue-0b72000a.js";import"./ua-39f605fe.js";import"./crypto-de3916ef.js";import"./colord-654bd828.js";import"./qs-ac37c01f.js";import"./axios-82afda87.js";import"./formData-f377b55f.js";import"./lodash-000674ce.js";const Q={class:"h-full"},Y={class:"h-full bg-#fff rounded-8px"},j={class:"h-full flex-center"},z={class:"h-full flex-center"},ce=H({__name:"index",setup(F){const y=g(),h=g(),i=g({companyName:"某某测试有限公司",sealName:"测试专用章"}),O=g({companyName:{required:!0,message:s("page.canvas.drawOfficialSeal.companyNameValidTip"),trigger:["input","blur"]},sealName:{required:!0,message:s("page.canvas.drawOfficialSeal.sealNameValidTip"),trigger:["input","blur"]}});X(()=>{N()});function N(){const l=h.value,e=l.getContext("2d");l.width=250,l.height=250;const r=l.width/2,o=l.height/2;e.lineWidth=5,e.strokeStyle="#f00",e.beginPath(),e.arc(r,o,110,0,Math.PI*2),e.stroke(),f(e,r,o,30,"#f00",0),e.font="20px Helvetica",e.textBaseline="middle",e.textAlign="center",e.lineWidth=1,e.fillStyle="#f00",e.fillText(i.value.sealName,r,o+65),e.translate(r,o),e.font="24px Helvetica";const c=i.value.companyName.length,u=4*Math.PI/(3*(c-1)),w=i.value.companyName.split("");let _="";for(let a=0;a<c;a++)_=w[a],a==0?e.rotate(5*Math.PI/6):e.rotate(u),e.save(),e.translate(90,0),e.rotate(Math.PI/2),e.fillText(_,0,5),e.restore();function f(a,p,T,b,$,V){a.save(),a.fillStyle=$,a.translate(p,T),a.rotate(Math.PI+V),a.beginPath();let S=Math.sin(0),M=Math.cos(0);const k=Math.PI/5*4;for(let d=0;d<5;d++)S=Math.sin(d*k),M=Math.cos(d*k),a.lineTo(S*b,M*b);a.closePath(),a.stroke(),a.fill(),a.restore()}}async function I(){var l;await((l=y.value)==null?void 0:l.validate()),N()}function R(){var l,e;try{const o=h.value.toDataURL("image/png"),c=document.createElement("a");c.download="seal.png",c.href=o,c.click(),(l=window.$message)==null||l.success(s("common.download.success"))}catch{(e=window.$message)==null||e.error(s("common.download.fail"))}}return(l,e)=>{const r=B,o=L,c=C,u=q,w=U,_=W,f=D,a=E;return A(),J("div",Q,[v("div",Y,[n(a,{class:"h-full"},{default:t(()=>[n(f,{span:12},{default:t(()=>[v("div",j,[n(_,{ref_key:"formRef",ref:y,model:i.value,rules:O.value,"label-placement":"left","label-width":"140px","require-mark-placement":"left"},{default:t(()=>[n(o,{label:m(s)("page.canvas.drawOfficialSeal.companyNameLabel"),path:"companyName"},{default:t(()=>[n(r,{value:i.value.companyName,"onUpdate:value":e[0]||(e[0]=p=>i.value.companyName=p),placeholder:m(s)("page.canvas.drawOfficialSeal.companyNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(o,{label:m(s)("page.canvas.drawOfficialSeal.sealNameLabel"),path:"sealName"},{default:t(()=>[n(r,{value:i.value.sealName,"onUpdate:value":e[1]||(e[1]=p=>i.value.sealName=p),placeholder:m(s)("page.canvas.drawOfficialSeal.sealNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(o,{label:" "},{default:t(()=>[n(w,null,{default:t(()=>[n(u,{type:"primary",onClick:I},{icon:t(()=>[n(c,{icon:"mingcute:seal-line"})]),default:t(()=>[P(" "+x(m(s)("page.canvas.drawOfficialSeal.createSeal")),1)]),_:1}),n(u,{type:"warning",onClick:R},{icon:t(()=>[n(c,{icon:"material-symbols:download"})]),default:t(()=>[P(" "+x(m(s)("page.canvas.drawOfficialSeal.downloadSeal")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1}),n(f,{span:12},{default:t(()=>[v("div",z,[v("canvas",{ref_key:"canvasRef",ref:h},null,512)])]),_:1})]),_:1})])])}}});export{ce as default};
