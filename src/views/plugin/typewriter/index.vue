<template>
  <div class="flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto">
    <n-card :title="$t('routes.plugin.typewriter')" :bordered="false" class="h-full">
      <span ref="textRef" class="text-18px" />
    </n-card>
  </div>
</template>

<script lang="ts" setup>
import { onMounted, shallowRef } from 'vue'
import TypeIt from 'typeit'
import type { Options } from 'typeit'
import type { El } from 'typeit/dist/types'

import { $t } from '@/locales'

const textRef = shallowRef<El>()

function init() {
  if (!textRef.value) return

  const options: Options = {
    strings: '一枚天鹅蛋在鸭窠里被母鸭孵出后，因为长相与众不同而被大家当成丑小鸭。因此，自从蛋壳里爬出后来便到处挨打，被排挤，被讥笑，不仅在鸭群中是这样，在鸡群中也是这样。大家都要赶走这个可怜的丑小鸭。鸭儿们啄他，小鸡们打他，连喂鸡的女佣人也用脚踢他。于是他只好连夜飞过篱笆逃走了。他来到野鸭群被要求不能同野鸭结婚。在沼泽地里，他碰到两个调皮的公雁，公雁叫他和他们一起做一个候鸟，在另外一块沼泽地里有几只可爱的小姐他可以碰碰运气。正在他们交谈之间突然听到“啪啪”两声枪声，两只公雁落到芦苇里死了。原来他们俩被猎人打死了。他只好再次逃离沼泽地来到一个农家小屋，因为他不能像母鸡一样下蛋，也不能像小猫一样拱起背发出咪咪的叫声和迸出火花而被要求不能有不同的看法。但是丑小鸭还是认为自己可以有不同的想法。他想在水里自由自在地游泳。当他看到美丽的天鹅展翅从寒冷的地带飞向不结冰的湖面时，丑小鸭不禁感到有一种说不出的兴奋。正是因为他认为自己可以有不同的想法，他才会选择飞向天鹅。他认为他被天鹅杀死，也要比被鸭子咬，被鸡群啄，被看管鸡场的那个女佣人踢和在冬天里受苦好得多。他来到天鹅群。他被大家看出是一只最美丽的天鹅而不是一只丑小鸭。他感到太幸福了，但他一点也不骄傲，因为他有一颗好的永远也不会骄傲的心。',
    lifeLike: true,
    speed: 120,
    loop: true
  }

  const initTypeIt = new TypeIt(textRef.value, options)

  initTypeIt.go()
}

onMounted(() => {
  init()
})
</script>